<html>
<head>
<title>Swap Book</title>
        <!-- Link allow you to use python with HTML -->
        <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script> 
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<style>
    .container {
        background-color: black;
        color: white;
    }

</style>
</head>
<body>
  <script>
    function updateTime() {
    const timer = document.getElementById("timer");
    const enableButton = document.getElementById("enableButton");
    const container = document.querySelector(".w3-container");
  
    // Set the end date to 30 days from now
    const endDate = new Date();
    endDate.setDate(endDate.getDate() + 0);
  
    // Calculate the remaining time in milliseconds
    const remainingTime = endDate.getTime() - new Date().getTime();
  
    // Convert remaining time to days, hours, minutes, and seconds
    let remainingSeconds = Math.ceil(remainingTime / 1000);
    const remainingMinutes = Math.floor(remainingSeconds / 60);
    const remainingHours = Math.floor(remainingMinutes / 60);
    const remainingDays = Math.floor(remainingHours / 24);
  
    // Calculate the remaining time as a string
    const remainingTimeString = `${remainingDays}d ${remainingHours % 24}h ${remainingMinutes % 60}m ${remainingSeconds % 60}s`;
  
    // Update the timer element with the remaining time
    timer.innerHTML = remainingTimeString;
  
    // Change background color of the container based on remaining time
    if (remainingDays <= 5) {
      container.style.backgroundColor = "red";
    } else if (remainingDays <= 10) {
      container.style.backgroundColor = "yellow";
    } else {
      container.style.backgroundColor = "green";
    }
  
    // Enable the button after 30 days
    if (remainingTime <= 0) {
      enableButton.textContent = "SWAP";
      enableButton.disabled = false;
      enableButton.addEventListener("click", function(){
        swap_table(l);
      })
    }
    
    // Display countdown of hours, minutes, and seconds
    const minutesString = `${(remainingMinutes % 60).toString().padStart(2, "0")}:`;
    const secondsString = `${(remainingSeconds % 60).toString().padStart(2, "0")}`;
    timer.innerHTML = `${hoursString}${minutesString}${secondsString}`;
  
    // Stop the timer when remaining time reaches 0
    if (remainingTime <= 0) {
      clearInterval(intervalId);
      timer.innerHTML = `00:00:00 (0d 0h 0m 0s)`;
    }
  
    remainingSeconds--;
  }
  
  // Call the updateTime function every second
  const intervalId = setInterval(updateTime, 1000);
  
  </script>
    <!-- Header -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
    <div class="jumbotron">
        <div class="container">
            <div class="row d-flex justify-content-center">
                <div class="col-xs-3">
                    <img class="img-responsive" src="logo.jpeg" alt="Book Logo">
                </div>
                <div class="col-xs-7">
                    <h1>The Reading Circle</h1>
                    <p>Experience the joy of reading with The Reading Circle - where every book is a new adventure!</p>
                </div>
            </div>
        </div>
    </div>

    <div class="w3-row-padding w3-content" style="max-width:1400px">
      <div class="w3-twothird">
        <!-- Timer bar -->
          <div class="w3-row-padding w3-content w3-card-4" style="max-width:1400px">
            <div class="w3-container w3-animate-zoom w3-left-align">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>Time remaining: <span id="timer"></span></h3>
                <button class="btn btn-primary" id="enableButton" disabled>Enable after 30 days</button>
              </div>
            </div>
          </div>
        <table class=" table w3-table w3-striped w3-border w3-hoverable w3-card-4">
          <thead>
              <tr class="w3-light-grey w3-large">
                  <!-- <th>ID</th> -->
                  <th>Id</th>
                  <th>Title</th>
                  <th>Main Owner</th>
                  <th>New Owner</th>
                  <th>Book Id</th>
                  <th>User Id</th>
              </tr>
          </thead>
        </table>
      </div>

      <script>
          var l = [
                  ['ID 1', 'Title 1', 'Main Owner 1', 'New Owner 1', 'BookId 1', 'UserId 1'],
                  ['ID 2', 'Title 2', 'Main Owner 2', 'New Owner 3', 'BookId 2', 'UserId 2'],
                  ['ID 3', 'Title 3', 'Main Owner 3', 'New Owner 6', 'BookId 3', 'UserId 3'],
                  ['ID 4', 'Title 4', 'Main Owner 4', 'New Owner 4', 'BookId 4', 'UserId 4'],
                  ['ID 5', 'Title 5', 'Main Owner 5', 'New Owner 2', 'BookId 5', 'UserId 5'],
                  ['ID 6', 'Title 6', 'Main Owner 6', 'New Owner 5', 'BookId 6', 'UserId 6']
                ]

          var table = document.getElementsByClassName('table')[0];

          var tbody = document.createElement('tbody');

          for (var row in l){
              var tr = document.createElement('tr');
              for (var data in l[row]){
                  var td = document.createElement('td');
                  td.innerHTML = l[row][data];
                  tr.appendChild(td);
              }
              tbody.appendChild(tr);
          }
          table.appendChild(tbody);
      </script>

<div class="w3-third">
    <div class="w3-container">
      <h2 class="w3-dark-grey w3-card-4">Swapped Table</h2>
      <table class="w3-table w3-striped w3-border w3-hoverable w3-card-4" id="swapped-table">
        <thead >
          <tr class="w3-light-grey w3-large">
            <th>Previous Owner</th>
            <th>New Owner</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="w3-justify"></p>
    </div>
  </div>
    <script>
      var list = [['ID 1', 'New Owner 2'], ['ID 2', 'New Owner 3'], ['ID 3', 'New Owner 6'], ['ID 4', 'New Owner 1'], ['ID 5', 'New Owner 4'], ['ID 6', 'New Owner 5']]
    
      var table = document.getElementById('swapped-table');
      var tbody = table.getElementsByTagName('tbody')[0];
    
      for (var i = 0; i < list.length; i++) {
        var row = document.createElement('tr');
        var cell1 = document.createElement('td');
        var cell2 = document.createElement('td');
        cell1.innerHTML = list[i][0];
        cell2.innerHTML = list[i][1];
        row.appendChild(cell1);
        row.appendChild(cell2);
        tbody.appendChild(row);
      }
    </script>
      </div>      
</body>
</html>
</body>
</html>